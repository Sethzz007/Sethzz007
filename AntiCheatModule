local AntiCheat = {}

function AntiCheat:GetMaxSpeed(player)
    local stats = player:FindFirstChild("leaderstats")
    if stats and stats:FindFirstChild("Level") then
        local level = tonumber(stats.Level.Value)
        if not level then return 16 end
        return math.clamp(level, 1, 39)
    end
    return 16
end

function AntiCheat:GetMaxJump()
    return 50 -- Pode ser personalizado com base em atributos do jogador.
end

function AntiCheat:IsFlying(char)
    local root = char:FindFirstChild("HumanoidRootPart")
    local humanoid = char:FindFirstChildOfClass("Humanoid")
    if not root or not humanoid then return false end

    if humanoid:GetState() == Enum.HumanoidStateType.Freefall then
        -- Configurar os parâmetros do Raycast.
        local rayOrigin = root.Position
        local rayDirection = Vector3.new(0, -5, 0) -- Verificar 5 unidades abaixo do jogador.
        local raycastParams = RaycastParams.new()
        raycastParams.FilterDescendantsInstances = {workspace.Terrain} -- Verifica apenas o terreno.
        raycastParams.FilterType = Enum.RaycastFilterType.Whitelist

        -- Executar o Raycast.
        local result = workspace:Raycast(rayOrigin, rayDirection, raycastParams)

        -- Se não houver interseção com o chão, o jogador está voando.
        return result == nil
    end
    return false
end

return AntiCheat